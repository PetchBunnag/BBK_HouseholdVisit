<html>
<!--
 * Name: Leafletjs connect php-geojson through postgis spatial database   
 * Purpose: GIST@NU (www.cgistln.nu.ac.th)
 * Date: 2016/10/13
 * Author: Chingchai Humhong (chingchaih@nu.ac.th)
 * Acknowledgement: 
 !-->
<head>
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
</head>
<body>
<div id="map" style="width: 100%; height: 800px;"></div>
<script type="text/javascript">
var map = L.map('map');
var OpenStreetMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
});
    
OpenStreetMap.addTo(map);
map.setView([13.6725183891, 100.427231182], 15
);
function addDataToMap(data, map) {
    var dataLayer = L.geoJson(data, {
        onEachFeature: function(feature, layer) {
            // var popupText = "tree id: " + feature.properties.tree_id
            //     + "<br>survey date: " + feature.properties.survey_date
            //     + "<br>ชื่อ: " + feature.properties.name_t
            //     + "<br>name: " + feature.properties.name_e
            //     + "<br>genus: " + feature.properties.genus
            //     + "<br>species: " + feature.properties.species
            //     + "<br>protection: " + feature.properties.protection
            //     + "<br>royal owner: " + feature.properties.royal_owner
            //     + "<br>condition: " + feature.properties.condition
            //     + "<br>historical: " + feature.properties.historical
            //     + "<br>address: " + feature.properties.address
            //     + "<br>plant_date: " + feature.properties.plant_date
            //     + "<br>description: " + feature.properties.description
            //     + "<br>flowers: " + feature.properties.flowers
            //     + "<br>pods: " + feature.properties.pods;
            // layer.bindPopup(popupText); 
        }
    });
    dataLayer.addTo(map);
}
json = $.getJSON("query.php", function(data) { addDataToMap(data,map); });

var Basemaps = {
    "OpenStreetMap": OpenStreetMap
}
var Overlays = {
    "Layer": geoLayer
}
L.control.layers(Basemaps, Overlays).addTo(map);
</script>
</body>
</html>


<!DOCTYPE html>
<html>

<head>
    <script data-require="jquery@3.1.1" data-semver="3.1.1" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet-src.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styledLayerControl.css" />
    <script src="src/styledLayerControl.js"></script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }

        html,
        body,
        #map {
            width: 100%;
            height: 100%;
        }

        label {
            font-family: 'Roboto', sans-serif;
        }

        l {
            font-family: 'Roboto', sans-serif;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        var map = L.map('map', {
            center: [13.6725183891, 100.427231182],
            minZoom: 1,
            zoom: 15,
        });

        var OpenStreetMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        });
        OpenStreetMap.addTo(map);

        var googleStreets = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {
            maxZoom: 20,
            subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
        });

        var googleHybrid = L.tileLayer('http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}', {
            maxZoom: 20,
            subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
        });

        var googleSat = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
            maxZoom: 20,
            subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
        });

        var point = L.geoJson(null, {
            onEachFeature: function(feature, layer) {
                var popupContent = "<l>Location Name: </l>" + feature.properties["Location Name"] +
                    "<br><l>Address: </l>" + feature.properties["Address"] +
                    "<br><l>Date: </l>" + feature.properties["Date"];
                layer.bindPopup(popupContent);
            }
        });

        var line = L.geoJson(null);

        $.getJSON('point.php', function(data) {
            point.addData(data).addTo(map);
        });

        $.getJSON('line.php', function(data) {
            line.addData(data).addTo(map);
        });

        var baseLayers = {
            "OpenStreetMap": OpenStreetMap,
            "Google Street View": googleStreets,
            "Google Hybrid": googleHybrid,
            "Google Satellites": googleSat
        };

        var overlays = {
            "March 7, 2022": point
        }

        var overlays = [{
            groupName: "March 7, 2022",
            expanded: true,
            layers: {
                "Points": point,
                "Line": line
            }
        }];

        var control = L.control.layers(baseLayers, overlays).addTo(map);
    </script>
</body>

</html>